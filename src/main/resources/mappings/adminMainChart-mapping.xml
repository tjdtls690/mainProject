<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="adminMainChartDAO">
	<resultMap type="adminMainChart" id="ChartResult">
		<id property="date" column="date" />
		<result property="daySum" column="sum(`payment_price`)" />
	</resultMap>
	<select id="dayChart" resultMap="ChartResult">
		SELECT DATE(`payment_date`) AS `date`,
		sum(`payment_price`)
		FROM payment_info
		WHERE DATE(`payment_date`) >= STR_TO_DATE('2021-04-01', '%Y-%m-%d')
		GROUP BY `date` LIMIT 0,13;
	</select>
	<select id="getDayChart" resultMap="ChartResult">
		SELECT DATE(`payment_date`) AS `date`,
		sum(`payment_price`)
		FROM payment_info
		WHERE DATE(`payment_date`) > STR_TO_DATE(#{date}, '%Y-%m-%d')
		GROUP BY `date` LIMIT 0,13;
	</select>
	<select id="getDayChart2" resultMap="ChartResult">
		SELECT DATE(`payment_date`) AS `date`,
		sum(`payment_price`)
		FROM payment_info
		WHERE DATE(`payment_date`) <![CDATA[<]]>  STR_TO_DATE(#{date}, '%Y-%m-%d')
		GROUP BY `date` desc LIMIT 13;

	</select>
</mapper>